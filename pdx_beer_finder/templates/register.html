{% extends 'base.html' %}

{% block body_block %}
<script>


    var userList = {{ user_list | safe }};


    function checkUserName(){
        var username = document.getElementById('username');
        var usernameValue = username.value;

        for(var i = 0; i < userList.length; i++){
            if(usernameValue == userList[i]){
                var error_div = document.getElementById('error_div');
                var error_p = document.createElement('p');
                var error_msg = document.createTextNode("Username is Taken");
                error_p.appendChild(error_msg);
                error_div.appendChild(error_p);
                $('#error_div').show()
            }
            if(usernameValue == '') {
                $('#error_div').hide()
                error_msg.innerHTML = '';
            }

        }
    }

//    function validateEmail(){
//        var email = document.getElementById('email');
//        var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
//
//        if(!re.test(email.value)){
//            var errormessage = document.getElementById('error_message')
//            errormessage.innerHTML = 'Please Enter a Valid Email';
//        }
//
//    }

</script>
<div class="container">
    <div class="jumbotron text-center" id="register">
        <div id="error_div"></div>
        <form id="register_form" method="post" action="">
            {% csrf_token %}
            <input type="text" name="username" id="username" placeholder="username" onblur="checkUserName()">
            <input type="email" name="email" id="email" placeholder="email" onblur="validateEmail()">
            <input type="password" name="password" id="password" placeholder="password">
            <input type="password" name="verify_password" id="verify_password" placeholder="verify">
            <input type="submit" value="Register" name="submit">
        </form>
    </div>
</div>




{% endblock %}
